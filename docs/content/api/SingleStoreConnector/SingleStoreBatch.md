# SingleStoreBatch class

[`SingleStoreBatch`](./SingleStoreBatch.md) implements the new [ADO.NET batching API](https://github.com/dotnet/runtime/issues/28633). It is currently experimental and may change in the future.

When using MariaDB (10.2 or later), the commands will be sent in a single batch, reducing network round-trip time. With other SingleStore Servers, this may be no more efficient than executing the commands individually.

Example usage:

```csharp
using var connection = new SingleStoreConnection("...connection string...");
await connection.OpenAsync();

using var batch = new SingleStoreBatch(connection)
{
	BatchCommands =
	{
		new SingleStoreBatchCommand("INSERT INTO departments(name) VALUES(@name);")
		{
			Parameters =
			{
				new SingleStoreParameter("@name", "Sales"),
			},
		},
		new SingleStoreBatchCommand("SET @dept_id = last_insert_id()"),
		new SingleStoreBatchCommand("INSERT INTO employees(name, department_id) VALUES(@name, @dept_id);")
		{
			Parameters =
			{
				new SingleStoreParameter("@name", "Jim Halpert"),
			},
		},
	 	new SingleStoreBatchCommand("INSERT INTO employees(name, department_id) VALUES(@name, @dept_id);")
		{
			Parameters =
			{
				new SingleStoreParameter("@name", "Dwight Schrute"),
			},
		},
	},
 };
 await batch.ExecuteNonQueryAsync();
```

```csharp
public sealed class SingleStoreBatch : DbBatch
```

## Public Members

| name | description |
| --- | --- |
| [SingleStoreBatch](SingleStoreBatch/SingleStoreBatch.md)() | Initializes a new [`SingleStoreBatch`](./SingleStoreBatch.md) object. The [`Connection`](./SingleStoreBatch/Connection.md) property must be set before this object can be used. |
| [SingleStoreBatch](SingleStoreBatch/SingleStoreBatch.md)(…) | Initializes a new [`SingleStoreBatch`](./SingleStoreBatch.md) object, setting the [`Connection`](./SingleStoreBatch/Connection.md) and [`Transaction`](./SingleStoreBatch/Transaction.md) if specified. |
| [BatchCommands](SingleStoreBatch/BatchCommands.md) { get; } | The collection of commands that will be executed in the batch. |
| [Connection](SingleStoreBatch/Connection.md) { get; set; } |  |
| override [Timeout](SingleStoreBatch/Timeout.md) { get; set; } |  |
| [Transaction](SingleStoreBatch/Transaction.md) { get; set; } |  |
| override [Cancel](SingleStoreBatch/Cancel.md)() |  |
| override [Dispose](SingleStoreBatch/Dispose.md)() |  |
| override [ExecuteNonQuery](SingleStoreBatch/ExecuteNonQuery.md)() |  |
| override [ExecuteNonQueryAsync](SingleStoreBatch/ExecuteNonQueryAsync.md)(…) |  |
| [ExecuteReader](SingleStoreBatch/ExecuteReader.md)(…) | Executes all the commands in the batch, returning a [`SingleStoreDataReader`](./SingleStoreDataReader.md) that can iterate over the result sets. If multiple resultsets are returned, use [`NextResult`](./SingleStoreDataReader/NextResult.md) to access them. |
| [ExecuteReaderAsync](SingleStoreBatch/ExecuteReaderAsync.md)(…) | Executes all the commands in the batch, returning a [`SingleStoreDataReader`](./SingleStoreDataReader.md) that can iterate over the result sets. If multiple resultsets are returned, use [`NextResultAsync`](./SingleStoreDataReader/NextResultAsync.md) to access them. |
| override [ExecuteScalar](SingleStoreBatch/ExecuteScalar.md)() |  |
| override [ExecuteScalarAsync](SingleStoreBatch/ExecuteScalarAsync.md)(…) |  |
| override [Prepare](SingleStoreBatch/Prepare.md)() |  |
| override [PrepareAsync](SingleStoreBatch/PrepareAsync.md)(…) |  |

## Protected Members

| name | description |
| --- | --- |
| override [DbBatchCommands](SingleStoreBatch/DbBatchCommands.md) { get; } |  |
| override [DbConnection](SingleStoreBatch/DbConnection.md) { get; set; } |  |
| override [DbTransaction](SingleStoreBatch/DbTransaction.md) { get; set; } |  |
| override [CreateDbBatchCommand](SingleStoreBatch/CreateDbBatchCommand.md)() |  |
| override [ExecuteDbDataReader](SingleStoreBatch/ExecuteDbDataReader.md)(…) |  |
| override [ExecuteDbDataReaderAsync](SingleStoreBatch/ExecuteDbDataReaderAsync.md)(…) |  |

## Remarks

The proposed ADO.NET API that [`SingleStoreBatch`](./SingleStoreBatch.md) is based on is not finalized. This API is experimental and may change in the future.

## See Also

* namespace [SingleStoreConnector](../SingleStoreConnector.md)

<!-- DO NOT EDIT: generated by xmldocmd for SingleStoreConnector.dll -->
