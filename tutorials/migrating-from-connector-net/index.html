<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="/MySqlConnector/" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Documentation for MySqlConnector: an Async MySQL Driver for .NET and .NET Core">
    <meta name="author" content="MySqlConnector Authors">
    
    <link rel="apple-touch-icon" sizes="57x57" href="img/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="img/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="img/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png">
    <link rel="manifest" href="img/icons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    

    <meta name="generator" content="Hugo 0.32" />
    
    <title>MySqlConnector - Migrating from Connector/NET</title>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="assets/prism/css/prism.css" />
  </head>

  <body>

    <div class="container">
        <div class="masthead">
            <ul class="nav nav-pills pull-right">
            <li><a href="https://github.com/mysql-net/MySqlConnector/">GitHub</a></li>
            </ul>
            <h3 class="muted"><a href="index.html">MySqlConnector</a></h3>
        </div>
        <hr />
        <div class="row">
            <div class="span9" id="main">




<h1 id="migrating-from-connector-net">Migrating from Connector/NET</h1>

<h3 id="connection-string-differences">Connection String Differences</h3>

<p>MySqlConnector has some different default connection string options:</p>

<table class="table table-striped table-hover">
  <thead>
    <th style="width:20%">Option</th>
    <th style="width:20%">MySqlConnector</th>
    <th style="width:20%">Oracle’s Connector/NET</th>
    <th style="width:40%">Notes</th>
  </thead>
  <tr>
    <td><code>AllowPublicKeyRetrieval</code></td>
    <td>Default is <code>false</code></td>
    <td>(not configurable)</td>
    <td>When using <code>sha256_password</code> authentication, this option allows the RSA public key to be retrieved from the server
    (when not using a secure connection). It’s <code>false</code> by default to avoid disclosing the password to a malicious proxy.</td>
  </tr>
  <tr>
    <td><code>ConnectionReset</code></td>
    <td>Default is <code>true</code></td>
    <td>Default is <code>false</code></td>
    <td>MySqlConnector always resets pooled connections by default so that the connection is in a known state. This fixes <a href="https://bugs.mysql.com/bug.php?id=77421">MySQL Bug 77421</a>.</td>
  </tr>
  <tr>
    <td><code>IgnoreCommandTransaction</code></td>
    <td>Default is <code>false</code></td>
    <td>(not configurable, effective default is <code>true</code>)</td>
    <td>See remarks under <a href="#mysqlcommand">MySqlCommand</a> below.</td>
  </tr>
  <tr>
    <td><code>LoadBalance</code></td>
    <td>Default is <code>RoundRobin</code></td>
    <td>(not configurable, effective default is <code>FailOver</code>)</td>
    <td>Connector/NET currently has <a href="https://bugs.mysql.com/bug.php?id=81650" title="MySQL bug #81650">a bug</a> that prevents multiple host names being used.</td>
  </tr>
  <tr>
    <td><code>ServerRSAPublicKeyFile</code></td>
    <td>(no default)</td>
    <td>(not configurable)</td>
    <td>Specify a file containing the server’s RSA public key to allow <code>sha256_password</code> authentication over an insecure connection.</td>
  </tr>
</table>

<p>Some connection string options that are supported in Connector/NET are not supported in MySqlConnector. For a full list of options that are
supported in MySqlConnector, see the <a href="connection-options">Connection Options</a>.</p>

<h3 id="transactionscope">TransactionScope</h3>

<p>MySqlConnector adds full distributed transaction support (for client code using <a href="https://docs.microsoft.com/en-us/dotnet/api/system.transactions.transaction"><code>System.Transactions.Transaction</code></a>),
while Connector/NET uses regular database transactions. As a result, code that uses <code>TransactionScope</code> or <code>MySqlConnection.EnlistTransaction</code>
may execute differently with MySqlConnector. To get Connector/NET-compatible behavior, set
<code>UseXaTransactions=false</code> in your connection string.</p>

<h3 id="mysqlconnection">MySqlConnection</h3>

<p>Connector/NET allows a <code>MySqlConnection</code> object to be reused after it has been disposed. MySqlConnector requires a new <code>MySqlConnection</code>
object to be created. See <a href="https://github.com/mysql-net/MySqlConnector/issues/331">#331</a> for more details.</p>

<h3 id="mysqlcommand">MySqlCommand</h3>

<p>Connector/NET allows a command to be executed even when <code>MySqlCommand.Transaction</code> references a commited, rolled back, or
disposed <code>MySqlTransaction</code>. MySqlConnector will throw an <code>InvalidOperationException</code> if the <code>MySqlCommand.Transaction</code>
property doesn’t reference the active transaction. This fixes <a href="https://bugs.mysql.com/bug.php?id=88611">MySQL Bug 88611</a>.
To disable this strict validation, set <code>IgnoreCommandTransaction=true</code>
in the connection string. See <a href="troubleshooting/transaction-usage/">Transaction Usage</a> for more details.</p>

<h3 id="exceptions">Exceptions</h3>

<p>For consistency with other ADO.NET providers, MySqlConnector will throw <code>InvalidOperationException</code> (instead of <code>MySqlException</code>)
for various precondition checks that indicate misuse of the API (and not a problem related to MySQL Server).</p>

<h3 id="fixed-bugs">Fixed Bugs</h3>

<p>The following bugs in Connector/NET are fixed by switching to MySqlConnector. (<del>Strikethrough</del> indicates bugs that have since been fixed in a newer version of Connector/NET, but were fixed first in MySqlConnector.)</p>

<ul>
<li><a href="https://bugs.mysql.com/bug.php?id=37283">#37283</a>, <a href="https://bugs.mysql.com/bug.php?id=70587">#70587</a>: Distributed transactions are not supported</li>
<li><a href="https://bugs.mysql.com/bug.php?id=50773">#50773</a>: Can’t use multiple connections within one TransactionScope</li>
<li><a href="https://bugs.mysql.com/bug.php?id=61477">#61477</a>: <code>ColumnOrdinal</code> in schema table is 1-based</li>
<li><a href="https://bugs.mysql.com/bug.php?id=66476">#66476</a>: Connection pool uses queue instead of stack</li>
<li><a href="https://bugs.mysql.com/bug.php?id=70111">#70111</a>: <code>Async</code> methods execute synchronously</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=70686">#70686</a>: <code>TIME(3)</code> and <code>TIME(6)</code> fields serialize milliseconds incorrectly</del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=72494">#72494</a>, <a href="https://bugs.mysql.com/bug.php?id=83330">#83330</a>: EndOfStreamException inserting large blob with UseCompression=True</li>
<li><a href="https://bugs.mysql.com/bug.php?id=73610">#73610</a>: Invalid password exception has wrong number</li>
<li><a href="https://bugs.mysql.com/bug.php?id=73788">#73788</a>: Can’t use <code>DateTimeOffset</code></li>
<li><a href="https://bugs.mysql.com/bug.php?id=75604">#75604</a>: Crash after 29.4 days of uptime</li>
<li><a href="https://bugs.mysql.com/bug.php?id=75917">#75917</a>, <a href="https://bugs.mysql.com/bug.php?id=76597">#76597</a>, <a href="https://bugs.mysql.com/bug.php?id=77691">#77691</a>, <a href="https://bugs.mysql.com/bug.php?id=78650">#78650</a>, <a href="https://bugs.mysql.com/bug.php?id=78919">#78919</a>, <a href="https://bugs.mysql.com/bug.php?id=80921">#80921</a>, <a href="https://bugs.mysql.com/bug.php?id=82136">#82136</a>: &ldquo;Reading from the stream has failed&rdquo; when connecting to a server</li>
<li><a href="https://bugs.mysql.com/bug.php?id=77421">#77421</a>: Connection is not reset when pulled from the connection pool</li>
<li><a href="https://bugs.mysql.com/bug.php?id=78426">#78426</a>: Unknown database exception has wrong number</li>
<li><a href="https://bugs.mysql.com/bug.php?id=78760">#78760</a>: Error when using tabs and newlines in SQL statements</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=78917">#78917</a>, <a href="https://bugs.mysql.com/bug.php?id=79196">#79196</a>, <a href="https://bugs.mysql.com/bug.php?id=82292">#82292</a>, <a href="https://bugs.mysql.com/bug.php?id=89040">#89040</a>: <code>TINYINT(1)</code> values start being returned as <code>sbyte</code> after <code>NULL</code></del></li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=80030">#80030</a>: Slow to connect with pooling disabled</del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=81650">#81650</a>, <a href="https://bugs.mysql.com/bug.php?id=88962">#88962</a>: <code>Server</code> connection string option may now contain multiple, comma separated hosts that will be tried in order until a connection succeeds</li>
<li><a href="https://bugs.mysql.com/bug.php?id=83329">#83229</a>: &ldquo;Unknown command&rdquo; exception inserting large blob with UseCompression=True</li>
<li><a href="https://bugs.mysql.com/bug.php?id=84220">#84220</a>: Cannot call a stored procedure with <code>.</code> in its name</li>
<li><a href="https://bugs.mysql.com/bug.php?id=84701">#84701</a>: Can’t create a parameter using a 64-bit enum with a value greater than int.MaxValue</li>
<li><a href="https://bugs.mysql.com/bug.php?id=85185">#85185</a>: <code>ConnectionReset=True</code> does not preserve connection charset</li>
<li><a href="https://bugs.mysql.com/bug.php?id=86263">#86263</a>: Transaction isolation level affects all transactions in session</li>
<li><a href="https://bugs.mysql.com/bug.php?id=87307">#87307</a>: NextResult hangs instead of timing out</li>
<li><a href="https://bugs.mysql.com/bug.php?id=87316">#87316</a>: MySqlCommand.CommandTimeout can be set to a negative value</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=87868">#87868</a>: <code>ColumnSize</code> in schema table is incorrect for <code>CHAR(36)</code> and <code>BLOB</code> columns</del></li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=87876">#87876</a>: <code>IsLong</code> is schema table is incorrect for <code>LONGTEXT</code> and <code>LONGBLOB</code> columns</del></li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=88058">#88058</a>: <code>decimal(n, 0)</code> has wrong <code>NumericPrecision</code></del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=88124">#88124</a>: CommandTimeout isn’t reset when calling Read/NextResult</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=88472">#88472</a>: <code>TINYINT(1)</code> is not returned as <code>bool</code> if <code>MySqlCommand.Prepare</code> is called</del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=88611">#88611</a>: <code>MySqlCommand</code> can be executed even if it has &ldquo;wrong&rdquo; transaction</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=88660">#88660</a>: <code>MySqlClientFactory.Instance.CreateDataAdapter()</code> and <code>CreateCommandBuilder</code> return <code>null</code></del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=89085">#89085</a>: <code>MySqlConnection.Database</code> not updated after <code>USE database;</code></li>
<li><a href="https://bugs.mysql.com/bug.php?id=89159">#89159</a>: <code>MySqlDataReader</code> cannot outlive <code>MySqlCommand</code></li>
<li><a href="https://bugs.mysql.com/bug.php?id=89335">#89335</a>: <code>MySqlCommandBuilder.DeriveParameters</code> fails for <code>JSON</code> type</li>
<li><a href="https://bugs.mysql.com/bug.php?id=89639">#89639</a>: <code>ReservedWords</code> schema contains incorrect data</li>
<li><a href="https://bugs.mysql.com/bug.php?id=91123">#91123</a>: Database names are case-sensitive when calling a stored procedure</li>
<li><a href="https://bugs.mysql.com/bug.php?id=91199">#91199</a>: Can&rsquo;t insert <code>MySqlDateTime</code> values</li>
<li><a href="https://bugs.mysql.com/bug.php?id=91751">#91751</a>: <code>YEAR</code> column retrieved incorrectly with prepared command</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=91752">#91752</a>: <code>00:00:00</code> is converted to <code>NULL</code> with prepared command</del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=91753">#91753</a>: Unnamed parameter not supported by <code>MySqlCommand.Prepare</code></li>
<li><a href="https://bugs.mysql.com/bug.php?id=91754">#91754</a>: Inserting 16MiB <code>BLOB</code> shifts it by four bytes when prepared</li>
<li><a href="https://bugs.mysql.com/bug.php?id=91770">#91770</a>: <code>TIME(n)</code> column loses microseconds with prepared command</li>
<li><a href="https://bugs.mysql.com/bug.php?id=92367">#92367</a>: <code>MySqlDataReader.GetDateTime</code> and <code>GetValue</code> return inconsistent values</li>
<li><a href="https://bugs.mysql.com/bug.php?id=92465">#92465</a>: &ldquo;There is already an open DataReader&rdquo; <code>MySqlException</code> thrown from <code>TransactionScope.Dispose</code></li>
<li><a href="https://bugs.mysql.com/bug.php?id=92734">#92734</a>: <code>MySqlParameter.Clone</code> doesn&rsquo;t copy all property values</li>
<li><a href="https://bugs.mysql.com/bug.php?id=92789">#92789</a>: Illegal connection attributes written for non-ASCII values</li>
<li><del><a href="https://bugs.mysql.com/bug.php?id=92912">#92912</a>: <code>MySqlDbType.LongText</code> values encoded incorrectly with prepared statements</del></li>
<li><a href="https://bugs.mysql.com/bug.php?id=92982">#92982</a>: <code>FormatException</code> thrown when connecting to MySQL Server 8.0.13</li>
<li><a href="https://bugs.mysql.com/bug.php?id=93047">#93047</a>: <code>MySqlDataAdapter</code> throws timeout exception when an error occurs</li>
<li><a href="https://bugs.mysql.com/bug.php?id=93202">#93202</a>: Connector runs <code>SHOW VARIABLES</code> when connection is made</li>
<li><a href="https://bugs.mysql.com/bug.php?id=93220">#93220</a>: Can’t call FUNCTION when parameter name contains parentheses</li>
<li><a href="https://bugs.mysql.com/bug.php?id=93370">#93370</a>: <code>MySqlParameterCollection.Add</code> precondition check isn&rsquo;t consistent</li>
<li><a href="https://bugs.mysql.com/bug.php?id=93374">#93374</a>: <code>MySqlDataReader.GetStream</code> throws <code>IndexOutOfRangeException</code></li>
<li><a href="https://bugs.mysql.com/bug.php?id=93825">#93825</a>: <code>MySqlException</code> loses data when serialized</li>
<li><a href="https://bugs.mysql.com/bug.php?id=94075">#94075</a>: <code>MySqlCommand.Cancel</code> throws exception</li>
<li><a href="https://bugs.mysql.com/bug.php?id=94760">#94760</a>: <code>MySqlConnection.OpenAsync(CancellationToken)</code> doesn’t respect cancellation token</li>
</ul>


        </div>
        <div class="span3">
    <ul class="nav nav-list" id="menu">

        
        <li class="nav-header">
            <a href="">Home</a>
        </li>

        

        
        <li class="nav-header">
            Getting Started
        </li>

        
        <li>
            <a href="/MySqlConnector/overview/installing/">Installing</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/overview/dbproviderfactories/">DbProviderFactories</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/overview/known-issues/">Known Issues</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/overview/version-history/">Version History</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/overview/configuration/">Configuration</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/overview/logging/">Logging</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/overview/use-with-orms/">Use with ORMs</a>
        </li>
        

        
        <li class="nav-header">
            <a href="/MySqlConnector/connection-options/">Connection Options</a>
        </li>

        

        
        <li class="nav-header">
            Tutorials
        </li>

        
        <li>
            <a href="/MySqlConnector/tutorials/basic-api/">Basic API</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/tutorials/best-practices/">Best Practices</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/tutorials/migrating-from-connector-net/">Migrating from Connector/NET</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/tutorials/net-core-mvc/">Use with .NET Core MVC</a>
        </li>
        

        
        <li class="nav-header">
            API
        </li>

        
        <li>
            <a href="/MySqlConnector/api/mysql-connection/">MySqlConnection</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/api/mysql-command/">MySqlCommand</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/api/mysql-data-reader/">MySqlDataReader</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/api/mysql-transaction/">MySqlTransaction</a>
        </li>
        

        
        <li class="nav-header">
            Troubleshooting
        </li>

        
        <li>
            <a href="/MySqlConnector/troubleshooting/connection-reuse/">Connection Reuse</a>
        </li>
        
        <li>
            <a href="/MySqlConnector/troubleshooting/transaction-usage/">Transaction Usage</a>
        </li>
        

        
    </ul>
</div>

      </div>
    </div>

    
    <script type="text/javascript" src="assets/prism/js/prism.js"></script>
  </body>
</html>

